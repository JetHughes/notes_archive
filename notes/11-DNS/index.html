<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="[!INFO] hosts are named by ip addresses: e.g., 192.168.1.2 we want to map an ip address to a readable name so it is memorable in the past it was easy to store all the name of possible address in a folder /etc/hosts."><title>11-DNS</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://jethughes.github.io/notes//icon.png><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Source+Sans+Pro:wght@400;600;700&family=Fira+Code:wght@400;700&display=swap" rel=stylesheet><link href=https://jethughes.github.io/notes/styles.1a1ffb6f8cc2d9990f06b61d70c9b09b.min.css rel=stylesheet><script src=https://jethughes.github.io/notes/js/darkmode.46b07878b7f5d9e26ad7a3c40f8a0605.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script src=https://jethughes.github.io/notes/js/popover.688c5dcb89a57776d7f1cbeaf6f7c44b.min.js></script>
<script>const BASE_URL="https://jethughes.github.io/notes/",fetchData=Promise.all([fetch("https://jethughes.github.io/notes/indices/linkIndex.628fd4209b6578f4380f2af1d6f94a6c.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://jethughes.github.io/notes/indices/contentIndex.5273b450a83b49629e0fbb31ca1a2a8d.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const n=new URL("https://jethughes.github.io/notes/"),s=n.pathname,o=window.location.pathname,i=s==o,e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=i&&!1;drawGraph("https://jethughes.github.io/notes",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2}),initPopover("https://jethughes.github.io/notes",!0,!0)},init=(e=document)=>{renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/jethughes.github.io\/notes\/js\/router.557a499829be51f9008c6efa5b73602a.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://jethughes.github.io/notes/js/search.cf33b507388f3dfd5513a2afcda7af41.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://jethughes.github.io/notes/>Jet's Notes</a></h1><svg tabindex="0" id="search-icon" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg><div class=spacer></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>11-DNS</h1><p class=meta>Last updated April 3, 2023</p><ul class=tags><li><a href=https://jethughes.github.io/notes/tags/lecture/>Lecture</a></li><li><a href=https://jethughes.github.io/notes/tags/cosc301/>Cosc301</a></li></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents></nav></details></aside><blockquote><p>[!INFO]
hosts are named by ip addresses: e.g., 192.168.1.2
we want to map an ip address to a readable name so it is memorable
in the past it was easy to store all the name of possible address in a folder <code>/etc/hosts</code>.
it uses a NIC networking inforamtion system.
but this is only for LAN
impossible to store all IP addresses in the internet this way</p></blockquote><blockquote><p>[!INFO]
DNS resolves a name to an IP address. can also do reverse mapping (this is useful for detecting spam emails).</p></blockquote><blockquote><p>[!INFO] distributed dns
now dns is distributed. it is a BIND (berkely internet name domain) service.
to do something distributedly. each LAN has their own NIS. each LAN manages their own domain names and IP addresses.
LANs can talk between each other.
we use a tree structure for domain names
at the start we have a root domain ⇒ <code>.</code>
then we have domains ⇒ <code>.com</code>, <code>.nz</code>, <code>.org</code>
then sub domains ⇒ <code>google.com</code>, <code>ocss.nz</code>
and sub sub ⇒ <code>otago.ac.nz</code>
the advatage of tree structure is that the parent only need to know the domain name of the sub domains and the name server
internal nodes are &ldquo;zones&rdquo;
a &ldquo;domain&rdquo; is a leaf node.</p></blockquote><blockquote><p>[!INFO] google.com -> otago.ac.nz
first find nameserver for <code>.nz</code> if they already know the address for <code>.nz</code> then can go directly
otherwise they need to go through the root name server <code>.</code>
you should configure this root Domain name server on a new installation
the root name server send the address of the <code>.nz</code> name server which sends the address of the <code>.ac.nz</code> name server, and so on until you get the final address</p></blockquote><blockquote><p>[!INFO] nameserver storage
some nameservers such as <code>.nz</code> are held by IANA</p></blockquote><blockquote><p>[!DEFINITION] NIS
network information system</p></blockquote><blockquote><p>[!DEFINITION] DNS
domain name service</p></blockquote><blockquote><p>[!INFO] DNS vs NIS
dns is centralised, NIS is local</p></blockquote><blockquote><p>[!INFO] BIND
windows -> WIND
software to implement a DNS server
&ldquo;<strong>BIND (Berkeley Internet Name Domain) is a software collection of tools including the world&rsquo;s most widely used DNS (Domain Name System) server software</strong>. This feature-full implementation of DNS service and tools aims to be 100% standards-compliant and is; intended to serve as a reference architecture for DNS software.&rdquo;</p></blockquote><blockquote><p>[!INFO] Queries
iterative query - doesn&rsquo;t give you the final answer only gives the name of the next server
recursive query - only send the recurive query to final server. this must return the data requested for tell you that it doesn&rsquo;t exist.
a LAN with an NIS will return recursive queries for all subdomain with that LAN</p></blockquote><blockquote><p>[!INFO] Files
/etc/nsswitch
/etc/hosts → contains local names, you can hardcode mappings in this file. this is more secure. if a domain name server if compromised you dont get the wrong name
/etc/resolv.conf → should put address here?
/etc/named.conf → root of the conf file. recruits other conf files. contains foward and reverse mappings
/etc/named.root → contain the names and other information of root servers
need to configure resolve order files->DNS</p></blockquote><blockquote><p>[!INFO] resource record
when you contact nameserver you need to put resource record there?
all names is record automaticall append parent domain name
e.g., server1 becomes server1.otago.ac.nz
resource records have different types
this allow sthe BIND to know which is which
need to set TTL of file. set the time for every record. Time to Live. e.g., 3 days. dns records are forgotten"flushed" after TTL has passed. after this they need to request the address again from the root nameserver
if you change ip address you might have to wait for 3days for everyones record of you to be changed. while changing you should have two nameservers → one for the old and one for the new</p></blockquote><blockquote><p>[!INFO] types of server
primary - one which most of the time is working
secondary - backup
we need high reliability, they can communicate between each other to update changes</p></blockquote><p>Problem</p><ul><li>How to get the IP address with an IP name?<ul><li>Mapping between IP addresses and IP names</li></ul></li><li>Simple solution<ul><li>Central database, like /etc/hosts or Sun<br>Microsystems’ NIS (Network Information<br>Service) or Windows’ WINS for LAN.</li><li>E.g. tkm.govt.nz 13.77.63.24</li></ul></li><li>However, keeping billions of such records<br>in a central database used by billions of<br>users is almost impossible.</li></ul><p>Domain Name Service (DNS)</p><ul><li>A distributed solution</li><li>Each organisation, called domain, maintains<br>its own database and answers queries about<br>its domain.</li><li>E.g.<ul><li>oucs1120.otago.ac.nz 139.80.22.10</li><li>oucs1234.otago.ac.nz 139.80.34.67</li><li>chasm.otago.ac.nz 139.80.45.90</li><li>hextreme.otago.ac.nz 139.80.63.88</li></ul></li></ul></article><hr><div class=page-end><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://jethughes.github.io/notes/js/graph.afdb02e537635f9a611b53a988e5645b.js></script></div></div><div id=contact_buttons><footer><p>Made with <a href=https://obsidian.md>Obsidian</a> using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, 2023</p><ul><li><a href=/notes/>Home</a></li><li><a href=https://github.com/jethughes>Github</a></li><li><a href=https://www.linkedin.com/in/jet-hughes-b3b688237>LinkedIn</a></li></ul></footer></div></div></body></html>