<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Installation of linux
 Major Linux distributions  Ubuntu, Red Hat, Debian, Fedora, S.u.S.E., etc   Why need to install?"><title>07-system-installation</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://jethughes.github.io/notes//icon.png><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Source+Sans+Pro:wght@400;600;700&family=Fira+Code:wght@400;700&display=swap" rel=stylesheet><link href=https://jethughes.github.io/notes/styles.1a1ffb6f8cc2d9990f06b61d70c9b09b.min.css rel=stylesheet><script src=https://jethughes.github.io/notes/js/darkmode.46b07878b7f5d9e26ad7a3c40f8a0605.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script src=https://jethughes.github.io/notes/js/popover.688c5dcb89a57776d7f1cbeaf6f7c44b.min.js></script>
<script>const BASE_URL="https://jethughes.github.io/notes/",fetchData=Promise.all([fetch("https://jethughes.github.io/notes/indices/linkIndex.2d02d2f8e7ff4351417cda6f18adda65.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://jethughes.github.io/notes/indices/contentIndex.5fce160590843f6b7dc9a9569ad5785e.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const n=new URL("https://jethughes.github.io/notes/"),s=n.pathname,o=window.location.pathname,i=s==o,e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=i&&!1;drawGraph("https://jethughes.github.io/notes",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2}),initPopover("https://jethughes.github.io/notes",!0,!0)},init=(e=document)=>{renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/jethughes.github.io\/notes\/js\/router.557a499829be51f9008c6efa5b73602a.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://jethughes.github.io/notes/js/search.cf33b507388f3dfd5513a2afcda7af41.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://jethughes.github.io/notes/>Jet's Notes</a></h1><svg tabindex="0" id="search-icon" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg><div class=spacer></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>07-system-installation</h1><p class=meta>Last updated March 20, 2023</p><ul class=tags><li><a href=https://jethughes.github.io/notes/tags/lecture/>Lecture</a></li><li><a href=https://jethughes.github.io/notes/tags/cosc301/>Cosc301</a></li></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents></nav></details></aside><p>Installation of linux</p><ul><li>Major Linux distributions<ul><li>Ubuntu, Red Hat, Debian, Fedora, S.u.S.E., etc</li></ul></li><li>Why need to install?<ul><li>Copy Linux onto the hard disk</li><li>Properly place the boot program, the Linux kernel, and startup scripts so that the computer can boot up from the hard disk</li></ul></li><li>Select an installation method<ul><li>CD-ROM</li><li>NFS</li></ul></li></ul><blockquote><p>[!INFO] to boot up you need operating system
operating systems have different package managers
to install linux, you need to use linux - from bootable disk, has a small linux system which installs linux
these days pretty much everything is just downloaded from internet repo
conf file : sources, hold information about repos of packages
you can also boot using UDP to contact a server with a copy of a disk image</p></blockquote><p>Disk layout after installation
<img src=https://i.imgur.com/C3njX6h.png alt="Disk layout after installation"></p><p>BIOS or EFI</p><ul><li>BIOS (Basic I/O System) or EFI (Extensible Firmware Interface)<ul><li>A program that is written in ROM</li><li>Provides the lowest level interface to peripheral devices and controls the first step of the boot procedure</li><li>BIOS tests the system, looks for and checks peripherals and then looks for a device (floppy, hard disk, or CDROM) to use to boot the system</li><li>Master Boot Record (MBR) is the sector that the BIOS reads in and starts when a hard disk is used to boot.</li></ul></li></ul><blockquote><p>[!INFO] if the hardware is base, the operating system does more work
hardware have their own little &ldquo;OSs&rdquo; which reduce load on the main OS. these are handles of the BIOS
get to bios menu by pressing f2 after boot
bios checks conditioni of hardware, then hands over to some bootable disk
boot sequence - find boot disk, with the bootloader, and loads linux
if live cd it will just read from the cd
bios reads MBR (master bootable record) sector (hard drive has many sectors) first &ldquo;track&rdquo; on the hard drive, has sector zero. bios read this, it contains the boot loader code (LILO, GRUB). this is not the kernel, it boots the kinux kernel. the boot loader run in memory (obv cant run program from hard drive).
checks partitions. boot loader know what files to load. firs file is linux kernel
if there are multiple partitions. (each partition is one fs/device). one partition is labeled as bootable (label in boot sector) and contains a boot sector with OS dependent code. you can have multiple bootable fs&rsquo;s with a differnt OS
magic number also, contains information about bootale disks
the kernel is run from the boot sector
every partition has a boot sector. not bootable disks have an empty boot sector</p></blockquote><blockquote><p>[!INFO] just like a series of dominoes, its pre-arranged and you need to check that the chain works.</p></blockquote><blockquote><p>[!INFO] EFI has more features. it is a more advanced BIOS</p></blockquote><p>Disk Partitioning</p><ul><li>A hard disk can be divided into several partitions. Each partition functions as if it were a separate hard disk.</li><li>If you have one hard disk, and want to have, say, two operating systems on it, you can divide the disk into two partitions. Each operating system uses its partition as it wishes and doesn&rsquo;t touch the other one. This way the two operating systems can co-exist peacefully on the same hard disk. Without partitions one would have to buy a hard disk for each operating system.</li></ul><blockquote><p>[!INFO] logical vs physical partitions
bios allows only 4 physical partitoins (MBR). linux created logical partitions to split these up more
logical partition not recognised by windows.
using GPT you can have more than 4 physical partitions. this way they are windows compatible</p></blockquote><ul><li>Why partition a disk?<ul><li>Easy maintenance of file systems</li></ul></li><li>If a partition is broken, just mount the backup partition.<ul><li>Easy for system upgrade</li></ul></li><li>Can avoid formatting other file systems when a distribution is to be upgraded</li><li>How to partition?<ul><li>Depends on the ultimate purpose for the system</li></ul></li><li>Some investigation on space requirements for each filesystem is strongly recommended</li></ul><blockquote><p>[!INFO]</p></blockquote><ul><li>The partitioning scheme or table<ul><li>is not built into the hardware, or even into the BIOS. It is only a convention that many operating systems follow.</li><li>As a safety precaution, it is a good idea to write down the partition table on a piece of paper, so that if it ever corrupts you don&rsquo;t have to lose all your files.</li></ul></li><li>Partition types (aka file system types)<ul><li>Linux (ext2, ext3, ext4), swap, DOS FAT, etc</li></ul></li><li>Partitioning a hard disk<ul><li>fdisk, cfdisk</li></ul></li><li>Magic number in MBR<ul><li>0xAA55</li><li>Used by BIOS to distinguish a bootable disk and a non-bootable disk</li></ul></li></ul><blockquote><p>[!INFO]</p></blockquote><ul><li>Simple scheme<ul><li>one linux partition, one swap partition</li></ul></li><li>Recommended scheme: more partitions for different file systems under linux<ul><li>/: 100-150MB, root partition for /bin, /dev, /etc, /lib, /sbin,…</li><li>/boot: 20-50MB, boot partition, including linux kernels</li><li>/swap: double the memory space, but could be smaller, partition for virtual memory</li><li>/usr: depends on software packages, 1GB-5GB, including X windows</li><li>/var: 500MB - 1GB</li><li>/home: as large as possible</li></ul></li><li>Logical Volume Management (LVM)<ul><li>For multiple hard drives with flexible FS space management.</li></ul></li></ul><blockquote><p>[!INFO] LVM allows you to mount fs&rsquo;s remotely</p></blockquote><p>Boot procedure (hard disk)</p><ul><li>Boot from hard disk<ul><li>OS dependent load program is installed on MBR</li></ul></li><li>Boot for multiple OSs<ul><li>OS independent load programs such as LILO (Linux Loader) or GRUB (GRand Unified Bootloader) is installed on MBR</li><li>OS dependent load program is installed on the boot sector of the partition of the OS</li><li>MAC bootloader is at /System/Library/CoreServices/boot.efi and loaded directly by EFI</li></ul></li></ul><blockquote><p>[!INFO]</p></blockquote><p>Boot procedure (floppy or CD)</p><ul><li>Floppy organization<ul><li>Consists of boot sector and data area</li><li>The bottom right picture is the layout of the boot section</li></ul></li><li>Boot from floppy<ul><li>The BIOS loads the program code and executes it</li><li>That program loads OS</li></ul></li></ul><p><img src=https://i.imgur.com/oVzVDGO.png alt="COSC301 Lecture 7: System … 10"></p><blockquote><p>[!INFO]</p></blockquote><p>Boot up phases</p><ul><li>BIOS<ul><li>Boot sequence</li></ul></li><li>Bootloader<ul><li>GRUB or LILO</li></ul></li><li>Kernel<ul><li>initrd (initial ram disk) for initial root directory</li></ul></li><li>Upstart scripts under /etc/init.d<ul><li>Re-mount root directory</li></ul></li><li>Refer to<ul><li><a href=https://wiki.ubuntu.com/Booting rel=noopener>https://wiki.ubuntu.com/Booting</a></li><li><a href=http://manpages.ubuntu.com/manpages/bionic/man7/boot.7.html rel=noopener>http://manpages.ubuntu.com/manpages/bionic/man7/boot.7.html</a></li></ul></li></ul><blockquote><p>[!INFO] Kernel does initalisation. e.g., load device driver, start daemons
hard drive needs to be loaded so kernel. but hdd has command to load the hardrive. kernels needs to first mount root HD, this is part on the kernel. it contains the base commands like mount and sh.</p></blockquote><p>How Linux started?</p><ul><li>When Linux kernel is loaded into memory and initialised, the init program is executed</li><li>init is the first process in Linux<ul><li>Runs some start-up scripts to start up services according to the run-level</li><li>Runs getty program that prompts login waiting for users to login</li></ul></li></ul><blockquote><p>[!INFO] init.d mounts rood directory, which is used the start the &ldquo;real&rdquo; kernel and mount other fs&rsquo;s</p></blockquote><p>Run levels for boot or shutdown</p><ul><li>Linux run levels<ul><li>0 - halt</li><li>1 - single user mode</li><li>2 - unused</li><li>3 - multiuser mode (default mode)</li><li>4 - X11 with GUI</li><li>5 - unused</li><li>6 - reboot</li></ul></li><li>Each level has a set of scripts for configuration</li></ul><blockquote><p>[!INFO]</p></blockquote><p>Processes for non-GUI boot-up
<img src=https://i.imgur.com/ocK6VLs.png alt="Processes for non-GUI boot-up"></p><blockquote><p>[!INFO]</p></blockquote><p>More details for boot-up</p><ul><li>When Linux boots,<ul><li>The kernel mounts the root file system</li><li>The first program that the system executes is init (the first process)</li></ul></li><li>It is responsible for starting the system startup scripts under /etc/init.d. The configurations for bootup are in /etc/init.</li><li>Modifies system run-level from initial bootup state to single user mode, then to its standard multiuser state.</li><li>Spawns getty ( which will invoke a login program)<ul><li>Mount the file systems</li></ul></li><li>File systems listed in /etc/fstab are mounted by command mount -a at boot</li><li>To mount more file systems, you should either modify /etc/fstab, or manually mount them.</li></ul><blockquote><p>[!INFO]</p></blockquote><p>What if the system can’t boot?</p><ul><li>If you made a mistake, e.g. the kernel image is corrupted</li><li>If you accidentally removed the /etc/passwd but rebooted, what will happen? How to fix?<ul><li>Use a live CD to boot the system</li><li>Mount the filesystem to be fixed</li><li>Recover the file</li><li>Reboot without the live CD.</li></ul></li></ul><blockquote><p>[!INFO]</p></blockquote><p>How to secure your machine?</p><ul><li>BIOS/EFI password</li><li>Boot sequence</li><li>Protect the single user mode with a root password</li><li>Protect the machine in a secure room!</li></ul><blockquote><p>[!INFO]</p></blockquote><p>Post installation</p><ul><li>Start a logbook</li><li>Backup your system: a boot and rescue CD</li><li>Edit login messages:/etc/issue and /etc/motd</li><li>User privilege and access control</li><li>Software installation</li><li>Harden security</li></ul><blockquote><p>[!INFO]</p></blockquote><p>Summary</p><ul><li>Linux boot process<ul><li>BIOS/EFI starts first after power on</li><li>Bootloader (e.g. grub) is loaded into RAM from the boot sector of the booting device</li><li>Linux kernel and ram disk are loaded into RAM</li><li>After kernel initialization, the first process init is created (It is systemd in Ubuntu).</li><li>Init process read startup scripts via command shell like bash</li><li>Filesystems are mounted, software servers/daemons starts, and network interfaces are brought up.</li><li>Finally GUI (e.g. startx) is started or login shell (e.g. getty) is prompted for users to login</li></ul></li></ul><blockquote><p>[!INFO]</p></blockquote></article><hr><div class=page-end><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://jethughes.github.io/notes/js/graph.afdb02e537635f9a611b53a988e5645b.js></script></div></div><div id=contact_buttons><footer><p>Made with <a href=https://obsidian.md>Obsidian</a> using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, 2023</p><ul><li><a href=/notes/>Home</a></li><li><a href=https://github.com/jethughes>Github</a></li><li><a href=https://www.linkedin.com/in/jet-hughes-b3b688237>LinkedIn</a></li></ul></footer></div></div></body></html>